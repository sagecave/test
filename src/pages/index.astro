---
import MainLayout from "../layouts/MainLayout.astro";
import { Image } from "astro:assets";
import apoteket from "../assets/images/apoteket.jpg";
import arbejde from "../assets/images/arbejde.jpg";
import glitch from "../assets/images/glitch.jpg";
import godtarbejde from "../assets/images/godt-arbejde.jpg";
import lidtifem from "../assets/images/lidtifem-pierre-falcke.jpg";
import smena from "../assets/images/lomo-smena-17.jpg";
import overouticm from "../assets/images/over-out-icm.jpeg";
import pierre from "../assets/images/pierre.jpeg";
import tyndfilm from "../assets/images/tynd-film.jpg";
import "../styles/tobii.min.css";
---

<MainLayout title="Titel">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet" />
  </head>

  <article class="md:p-0">
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <section>
      <section class="max-w-4xl mt-32 prose text-center" id="titel">
        <!-- h1 med typewriter-effekt -->
        <h1 class="text-5xl md:text-5xl text-white typewriter" id="dynamicText" style="font-family: 'Permanent Marker', cursive;"></h1>
      </section>

      <section id="herovideo">
        <video autoplay muted loop class="w-full h-full object-cover" id="slowVideo">
          <source src="pierre-falcke-video.mp4" type="video/mp4" />
        </video>
      </section>
    </section>
    <section class="max-w-xl mx-auto prose mt-[100vh]" id="manchet">
      <p class="text-xl text-white">
        Pierre Falcke. Du ved formentligt ikke hvem han er. Men indtil for kort tid siden, så du hans værker et par gange om dagen, hver dag, året rundt. Pierre Falcke var en af verdens bedst sælgende stock-fotografer, og han solgte over 2 millioner
        fotos om året. Men Pierre kunne ikke drømme om at bruge sine egne fotos - faktisk kan han ikke fordrage sit eget arbejde.
      </p>
      <div>
        <a href="pierre.jpeg" class="lightbox">
          <Image src={pierre} alt="" class="my-0" />
          <figcaption class="text-white">Pierre Falcke, selvportræt</figcaption>
        </a>
      </div>
      <p class="text-2xl italic text-center p-8 text-white fade-in">Pierre sælger 2 millioner fotos om året</p>
      <p class="text-2xl italic text-center p-8 text-white fade-in">Det svarer til én fotolicens hvert 16. sekund</p>
      <p class="text-2xl italic text-center text-white fade-in">Du ser hans fotos ca. 2 gange om dagen</p>
    </section>

    <section class="max-w-4xl mx-auto my-32 prose border border-double p-8" id="hvaderstockfotos">
      <h2 class="text-2xl text-white">Hvad er stock-fotos?</h2>
      <div class="grid grid-cols-3 gap-4 text-white cursor cursor-handcursor">
        <div>
          <p>
            Stock-fotos er billeder, der kan købes fra et foto-website. De bruges af aviser, til markedsføring og som indhold på websites. En licens til at bruge et foto koster typisk mellem 10 og 100 kroner, alt afhængig af hvad de skal bruges til.
          </p>
          <Image src={arbejde} alt="" />
        </div>
        <div>
          <p class="text-white">
            Stock-fotos bliver ofte kritiseret for at være uden sjæl - det er de der billeder af en læge i hvid kittel med stetoskop om halsen på en meget hvid baggrund eller en meget glad dame fra virksomhedens salgs- eller supportafdeling.
          </p>
          <Image src={apoteket} alt="" />
        </div>
        <div class="text-white">
          <p>Stock-fotos har eksisteret i mange år. Før branchen blev digital, tilbød stock-foto virksomhederne billedmapper, der kunne bestilles fra. Men stock-foto branchen var én af de tidlige til at blive fuldt digitaliseret.</p>
          <Image src={godtarbejde} alt="" />
        </div>
      </div>
    </section>

    <section class="text-white" id="enskillevej">
      <div class="max-w-xl mx-auto mt-32 prose text-white">
        <h2 class="text-4xl text-white">En skillevej</h2>
        <p>
          Pierre tjente godt det følgende årti. Men stille og roligt begyndte billederne også at give ham kvalme. Han kunne ikke holde sit eget arbejde ud, og måtte finde et modsvar til alle de blankpolerede fotos. Noget han kunne lave med stolthed.
          Pierre bestluttede sig for at droppe stock-fotos, og vende tilbage til rødderne.
        </p>
        <p>
          Han søgte inspiration i analog fotografering, i Lomo-bevægelsen, Glitch art og polaroid fotografering, og begyndte stille og roligt at skabe sig en ny stil - en stil med fokus på det uperfekte, og hvor der er et uforudsigeligt element i det
          at tage billeder.
        </p>
      </div>
    </section>

    <section class="max-w-4xl mx-auto my-32 prose border border-double text-white p-8" id="fotoeksperimenter">
      <h2 class="text-2xl text-white">Fotoeksperimenter</h2>
      <div class="grid grid-cols-3 gap-4">
        <div class="fade-in">
          <h3 class="text-xl text-white">Analog fotografering</h3>
          <p>
            Fotografering med gode, gammeldags filmruller. Analog fotografering stiger for tiden i popularitet, specielt blandt unge, og prisen på filmruller og vintage-kameraer skyder i vejret. Mange fotografer synes at film-fotografering er mere
            ægte har mere “sjæl.”
          </p>
          <p>Analog fotografering kan gå galt mange steder i processen, og det giver også mulighed for at eksperimentere med “det uperfekte og uforudsigelige i processen.”</p>
        </div>
        <div class="fade-in">
          <h3 class="text-xl text-white">Glitch art</h3>
          <p>Når der sker en teknisk fejl i et medie/en kommunikationskanal kaldes det en glitch. Glitch art går ud på at dyrke fejlene for at skabe kunst.</p>
        </div>
        <div class="fade-in">
          <h3 class="text-xl text-white">Lomografi</h3>
          <p>Et lomografi er egentlig bare et fotografi skudt uden videre omtanke, og med noget foto-udstyr af ret alternativ kvalitet.</p>
          <p>Det kan måske lyde lidt anti-fotograf-agtigt. Men en del foto-entusiaster dyrker den slags, og ser det som en foto-genre.</p>
        </div>
      </div>
    </section>

    <section class="text-white" id="nybegyndelse">
      <div class="max-w-xl mx-auto my-32 prose text-white">
        <h2 class="text-4xl text-white">En ny begyndelse</h2>
        <p>
          Men Pierre er glad for sin beslutning. Indkomsten er lavere nu, men han har stadig lidt penge på kontoen, og studerer nu kunstfotografering på fotoskolen Fatamorgana. Han glæder sig over hver dags kunstneriske eksperimenter, og er for
          første gang i sit liv rigtig stolt af sit arbejde. Som Pierre selv udtrykker det: <span class="italic"
            >“Det interessante ligger i fejlen. Et foto med masser af fejl er interessant. Jeg eksperimenterer med udstyr og teknik, og skaber nye visuelle udtryk. Det uperfekte er perfekt.”</span
          >
        </p>
      </div>
      <div class="grid grid-cols-2 gap-4 max-w-4xl mx-auto my-8 items-center prose">
        <div>
          <a href="over-out-icm.jpeg" class="lightbox">
            <Image src={overouticm} alt="Overeksponeret og ude af fokus" class="my-0" />
            <figcaption class="text-white">Overeksponeret og ude af fokus</figcaption>
          </a>
        </div>
        <div>
          <a href="tynd-film.jpg" class="lightbox">
            <Image src={tyndfilm} alt="Tynd film" class="my-0" />
            <figcaption class="text-white">Tynd film</figcaption>
          </a>
        </div>
      </div>
      <div class="max-w-xl mx-auto my-32 prose text-white">
        <p>
          Karrieren begynder også så småt også at gå den rette vej: Pierre er begyndt at sælge fotokunst på nettet, og har udgivet sin første foto-bog med titlen “Lidt i fem,” som er en fotografisk odyssé om at slæbe en brandert hjem i de tidlige
          morgentimer. I forbindelse med udgivelsen af bogen, har han en udstilling på vej i det Kongelige Biblioteks fotoudstilling.
        </p>
        <p>
          Som Pierre forklarer det: <span class="italic text-white">“Nu kan jeg leve livet igen. Jeg føler mig frisk. Jeg føler mig fri. Jeg føler mig genfødt.”</span>
        </p>
        <div>
          <a href="lidtifem-pierre-falcke.jpg" class="lightbox" alt="">
            <Image src={lidtifem} alt="" class="my-0" />
            <figcaption class="text-white">Lidt i fem - ny bog af Pierre Falcke</figcaption>
          </a>
        </div>
      </div>
    </section>
    <section class="whitespace-nowrap overflow-x-hidden bg-zinc-900 text-white py-4">
      <div class="inline-block animate-infinite-scroll whitespace-nowrap [&_span]:mx-6">
        <span>Pierre Falcke</span>
        <span>Uperfekt er Perfekt</span>
        <span>Køb bogen nu</span>
        <span>Se hans flotte billeder</span>
        <span>Fra det danske landskab</span>
        <span>eller</span>
        <span>giv den som gave</span>
        <span>til en ven</span>
        <span>der elsker flotte billeder</span>
        <span>Du er perfekt som du er</span>
      </div>
      <div class="inline-block animate-infinite-scroll whitespace-nowrap [&_span]:mx-6" aria-hidden="true">
        <span>Pierre Falcke</span>
        <span>Uperfekt er Perfekt</span>
        <span>Køb bogen nu</span>
        <span>Se hans flotte billeder</span>
        <span>Fra det danske landskab</span>
        <span>eller</span>
        <span>giv den som gave</span>
        <span>til en ven</span>
        <span>der elsker flotte billeder</span>
        <span>Du er perfekt som du er</span>
      </div>
    </section>
  </article>
</MainLayout>

<style>
  /* Herovideo styling */
  #herovideo {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1; /* Sørger for, at videoen ligger bag resten af indholdet */
  }

  video {
    width: 100vw;
    height: 100vh;
    object-fit: cover;
  }

  /* Progress bar container */
  .progress-container {
    width: 100%;
    height: 5px;
    background-color: #000000;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
  }

  /* Progress bar style */
  .progress-bar {
    height: 100%;
    width: 0;
    background-color: #ffffff;
    transition: width 0.25s ease;
  }

  /* Typewriter-effekt */
  .typewriter {
    border-right: 2px solid white;
    white-space: nowrap;
    overflow: hidden;
    margin: 0 auto;
    letter-spacing: 0.15em;
    animation: blink-caret 0.75s step-end infinite;
  }

  @keyframes blink-caret {
    from,
    to {
      border-color: transparent;
    }
    50% {
      border-color: white;
    }
  }

  .hidden {
    display: none;
  }
  .visible {
    display: block;
  }

  /* Zoom-in effekt når musen er over billeder */
  img {
    transition: transform 0.3s ease;
  }

  img:hover {
    transform: scale(1.1);
    cursor: zoom-in;
  }
  /* Starttilstand: Gør elementet usynligt og flyt det lidt ned */
  .fade-in {
    opacity: 0;
    transform: translateY(50px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  /* Når elementet er i view, gør det synligt og flyt det til sin oprindelige position */
  .fade-in.inview {
    opacity: 1;
    transform: translateY(0);
  }

  .fade-in {
    opacity: 0;
    transform: translateY(30px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }
  @keyframes infinite-scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }

  .animate-infinite-scroll {
    animation: infinite-scroll 15s linear infinite;
  }
</style>
<script is:inline src="/tobii.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@motionone"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Initialiser Tobii
    const tobii = new Tobii();

    // Find hero-videoen og alle sektioner med "hidden" klassen
    const heroVideo = document.getElementById("herovideo");
    const hiddenSections = document.querySelectorAll(".content-below");
    const slowVideo = document.getElementById("slowVideo");
    slowVideo.playbackRate = 0.2; // Gør videoen langsommere

    // Tilføj eventlistener til scroll
    window.addEventListener("scroll", function () {
      const videoBottom = heroVideo.getBoundingClientRect().bottom;
      if (videoBottom <= 0) {
        hiddenSections.forEach((section) => {
          section.classList.remove("hidden");
        });
      }
      updateProgressBar();
    });

    // Progress bar
    function updateProgressBar() {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      document.getElementById("progress-bar").style.width = scrolled + "%";
    }

    // Typewriter effekt
    const textElement = document.getElementById("dynamicText");
    const sentences = ["Uperfekt er perfekt", "En fortælling af Pierre"];
    let currentSentenceIndex = 0;
    let isDeleting = false;
    let charIndex = 0;
    const typingSpeed = 100;
    const deletingSpeed = 50;
    const delayBetweenSentences = 1500;

    function typeWriter() {
      const currentSentence = sentences[currentSentenceIndex];

      if (isDeleting) {
        textElement.innerHTML = currentSentence.substring(0, charIndex);
        charIndex--;
        if (charIndex < 0) {
          isDeleting = false;
          currentSentenceIndex++;
          if (currentSentenceIndex >= sentences.length) return;
          setTimeout(typeWriter, typingSpeed);
        } else {
          setTimeout(typeWriter, deletingSpeed);
        }
      } else {
        textElement.innerHTML = currentSentence.substring(0, charIndex + 1);
        charIndex++;
        if (charIndex === currentSentence.length) {
          isDeleting = true;
          setTimeout(typeWriter, delayBetweenSentences);
        } else {
          setTimeout(typeWriter, typingSpeed);
        }
      }
    }
    typeWriter();

    // Fade-in animation med IntersectionObserver
    const faders = document.querySelectorAll(".fade-in");
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("inview");
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 }
    );

    faders.forEach((fader) => {
      observer.observe(fader);
    });

    // Motion One animation
    motion.inView(".fade-in", ({ target }) => {
      motion.animate(
        target,
        {
          opacity: 1,
          transform: "translateY(0)",
        },
        {
          duration: 0.6,
          delay: motion.stagger(0.2),
          easing: "ease-out",
        }
      );
    });

    // Typewriter sound
    const typewriterSound = new Audio("/typewriter.mp3");

    function playSound() {
      typewriterSound
        .play()
        .then(() => {
          setTimeout(() => {
            typewriterSound.pause();
            typewriterSound.currentTime = 0;
          }, 10000);
        })
        .catch((error) => {
          console.log("Autoplay failed due to browser restrictions:", error);
        });
    }
    playSound();
  });
</script>
